/** * HTML5 WebDB */sslstripwire.webdb.db = null;sslstripwire.webdb.open = function() {	var dbSize = 5 * 1024 * 1024; // 5MB	sslstripwire.webdb.db = openDatabase('site_db', '0.1', 'SSLStripWire Site Database', dbSize);}sslstripwire.webdb.onError = function(tx, e) {	if(sslstripwire.settings.debug){		console.log('Error: ' + e.message );	}}sslstripwire.webdb.createTable = function() {	sslstripwire.webdb.db.transaction(function(tx) {		// Main Site Database		tx.executeSql('CREATE TABLE IF NOT EXISTS ' +                   'site_db(ID INTEGER PRIMARY KEY ASC, domain_url TEXT, https_count INT, http_count INT, last_visited DATETIME)', []);	});}sslstripwire.webdb.onSuccess = function(tx, r) {	if(sslstripwire.settings.debug){		console.log('Database action completed successfully.');	}}/** * Helper Function */sslstripwire.webdb.getDomain = function(url) {	var regex = /^https?:\/\/(.*?\.?.*?\..*?)\//;	var match = regex.exec(url);	return match[1];}sslstripwire.webdb.getMethod = function(url) {	if(url.substring(0, 4) == "https"){		return "https";	} else {		return "http";	}}/** * DB Select/Insert */sslstripwire.webdb.getSiteStats = function(domain_url) {  sslstripwire.webdb.db.transaction(function(tx) {    tx.executeSql('SELECT * FROM site_db WHERE domain_url = ?',		[domain_url],		sslstripwire.webdb.onError,         sslstripwire.webdb.onError);  });}// INSERT OR UPDATEsslstripwire.webdb.logSite = function(domain_url) {  sslstripwire.webdb.db.transaction(function(tx){    var addedOn = new Date();    tx.executeSql('INSERT INTO site_db(domain_url, https_count, http_count, last_visited) VALUES (?,?,?,?)',         [, addedOn],        sslstripwire.webdb.onSuccess,        sslstripwire.webdb.onError);    });}